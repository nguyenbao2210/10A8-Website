<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Lời nhắn 10A8 – K24</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      display: flex;
      height: 100vh;
    }
    .sidebar {
      width: 250px;
      background: #222;
      color: white;
      padding: 15px;
      overflow-y: auto;
    }
    .sidebar h2 {
      font-size: 18px;
      margin-top: 0;
    }
    .sidebar ul {
      list-style: none;
      padding: 0;
    }
    .sidebar li {
      margin: 8px 0;
    }
    .sidebar a {
      color: white;
      text-decoration: none;
      cursor: pointer;
    }
    .sidebar a:hover {
      color: #ffcc00;
    }
    .content {
      flex: 1;
      padding: 20px;
      background: #f9f9f9;
      overflow-y: auto;
    }
    .message {
      border-bottom: 1px solid #ddd;
      padding: 10px 0;
    }
    .time {
      font-size: 12px;
      color: #666;
    }
  </style>
</head>
<body>

  <div class="sidebar">
    <h2>Danh sách bạn bè (10A8 – K24)</h2>
    <ul>
      <li><a onclick="loadMessages('pham_nhat_an')">Phạm Nhật An</a></li>
      <li><a onclick="loadMessages('tran_thuc_anh')">Trần Thục Anh</a></li>
      <li><a onclick="loadMessages('nguyen_hong_anh')">Nguyễn Hồng Anh</a></li>
      <li><a onclick="loadMessages('truong_nguyen_bao')">Trương Nguyên Bảo</a></li>
      <li><a onclick="loadMessages('pham_ngoc_quynh_chi')">Phạm Ngọc Quỳnh Chi</a></li>
      <li><a onclick="loadMessages('chu_ngoc_diep')">Chu Ngọc Diệp</a></li>
      <li><a onclick="loadMessages('kim_nhat_dung')">Kim Nhật Dũng</a></li>
      <li><a onclick="loadMessages('le_hai_dang')">Lê Hải Đăng</a></li>
      <li><a onclick="loadMessages('nguyen_anh_duc')">Nguyễn Anh Đức</a></li>
      <li><a onclick="loadMessages('dam_trong_hieu')">Đàm Trọng Hiếu</a></li>
      <li><a onclick="loadMessages('pham_minh_hieu')">Phạm Minh Hiếu</a></li>
      <li><a onclick="loadMessages('nguyen_duc_huy')">Nguyễn Đức Huy</a></li>
      <li><a onclick="loadMessages('dao_duc_hung')">Đào Đức Hưng</a></li>
      <li><a onclick="loadMessages('pham_cat_khanh')">Phạm Cát Khánh</a></li>
      <li><a onclick="loadMessages('chu_ha_gia_khanh')">Chu Hà Gia Khánh</a></li>
      <li><a onclick="loadMessages('ngo_xuan_khoa')">Ngô Xuân Khoa</a></li>
      <li><a onclick="loadMessages('nguyen_dang_khoa')">Nguyễn Đăng Khoa</a></li>
      <li><a onclick="loadMessages('nguyen_minh_khoi')">Nguyễn Minh Khôi</a></li>
      <li><a onclick="loadMessages('pham_gia_khoi')">Phạm Gia Khôi</a></li>
      <li><a onclick="loadMessages('tran_tung_lam')">Trần Tùng Lâm</a></li>
      <li><a onclick="loadMessages('tran_lam')">Trần Lâm</a></li>
      <li><a onclick="loadMessages('dang_tran_ha_linh')">Đặng Trần Hà Linh</a></li>
      <li><a onclick="loadMessages('le_nhat_minh')">Lê Nhật Minh</a></li>
      <li><a onclick="loadMessages('nguyen_vu_hoang_minh')">Nguyễn Vũ Hoàng Minh</a></li>
      <li><a onclick="loadMessages('tran_duy_minh')">Trần Duy Minh</a></li>
      <li><a onclick="loadMessages('bui_duong_tra_my')">Bùi Dương Trà My</a></li>
      <li><a onclick="loadMessages('pham_nhat_nam')">Phạm Nhật Nam</a></li>
      <li><a onclick="loadMessages('nguyen_ha_nghiep')">Nguyễn Hà Nghiệp</a></li>
      <li><a onclick="loadMessages('nguyen_minh_ngoc')">Nguyễn Minh Ngọc</a></li>
      <li><a onclick="loadMessages('tran_gia_phat')">Trần Gia Phát</a></li>
      <li><a onclick="loadMessages('duong_thi_mai_phuong')">Dương Thị Mai Phương</a></li>
      <li><a onclick="loadMessages('nguyen_anh_quan')">Nguyễn Anh Quân</a></li>
      <li><a onclick="loadMessages('nguyen_minh_son')">Nguyễn Minh Sơn</a></li>
      <li><a onclick="loadMessages('pham_thanh_thao')">Phạm Thanh Thảo</a></li>
      <li><a onclick="loadMessages('nguyen_thanh_thao')">Nguyễn Thanh Thảo</a></li>
      <li><a onclick="loadMessages('to_phuong_thao')">Tô Phương Thảo</a></li>
      <li><a onclick="loadMessages('nguyen_thanh_thuy')">Nguyễn Thanh Thủy</a></li>
      <li><a onclick="loadMessages('lai_hoang_lan_thy')">Lai Hoàng Lan Thy</a></li>
      <li><a onclick="loadMessages('nguyen_thi_thanh_tra')">Nguyễn Thị Thanh Trà</a></li>
      <li><a onclick="loadMessages('do_quynh_trang')">Đỗ Quỳnh Trang</a></li>
      <li><a onclick="loadMessages('dang_khanh_vinh')">Đặng Khánh Vinh</a></li>
      <li><a onclick="loadMessages('nguyen_quang_vinh')">Nguyễn Quang Vinh</a></li>
      <li><a onclick="loadMessages('le_quang_vu')">Lê Quang Vũ</a></li>
      <li><a onclick="loadMessages('vu_nhu_y')">Vũ Như Ý</a></li>
    </ul>
  </div>

  <div class="content">
    <h2 id="user-title">Chọn tên để xem lời nhắn</h2>
    <div id="messages"></div>
  </div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js"></script>

  <script>
    // Cấu hình Firebase của bạn
    const firebaseConfig = {
      apiKey: "AIzaSyD2ikCTbjpBs3L5gwiLKWOp5kAlBpUxSNI",
      authDomain: "a8-noitaoranhungconhodungmanh.firebaseapp.com",
      projectId: "a8-noitaoranhungconhodungmanh",
      storageBucket: "a8-noitaoranhungconhodungmanh.firebasestorage.app",
      messagingSenderId: "795336127757",
      appId: "1:795336127757:web:5351fe6536b37ac90e6c44",
      measurementId: "G-SNXX0VKYXR"
    };

    // Khởi tạo Firebase
    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // Hàm load lời nhắn cho 1 user
    async function loadMessages(userId) {
      document.getElementById('user-title').innerText = "Lời nhắn của " + userId;
      const messagesDiv = document.getElementById('messages');
      messagesDiv.innerHTML = "Đang tải...";

      try {
        const querySnapshot = await db
          .collection("messages")
          .doc(userId)
          .collection("inbox")
          .orderBy("time", "desc")
          .get();

        messagesDiv.innerHTML = "";
        querySnapshot.forEach((doc) => {
          const data = doc.data();
          messagesDiv.innerHTML += `
            <div class="message">
              <p>${data.content}</p>
              <div class="time">${data.time}</div>
            </div>
          `;
        });

        if (messagesDiv.innerHTML === "") {
          messagesDiv.innerHTML = "<p>Chưa có lời nhắn nào.</p>";
        }

      } catch (error) {
        console.error("Lỗi khi lấy dữ liệu:", error);
        messagesDiv.innerHTML = "<p>Lỗi khi tải dữ liệu.</p>";
      }
    }
  </script>
</body>
</html>
